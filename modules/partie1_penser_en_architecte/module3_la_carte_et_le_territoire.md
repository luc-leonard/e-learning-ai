# Module 3 : La carte et le territoire

## *Quand votre plan devient trop gros pour tenir dans la conversation*

---

## Ce que vous savez dÃ©jÃ 

Vous savez dÃ©couper un projet en parties (Module 1). Vous savez dÃ©crire comment ces parties travaillent ensemble et ce qui se passe quand Ã§a rate (Module 2). Votre plan ressemble maintenant Ã  un vrai document de plusieurs pages.

Et c'est lÃ  le problÃ¨me.

**DurÃ©e :** 2-3 heures
**Ce qu'il vous faut :** Votre plan des Modules 1 et 2, un compte Claude, votre carnet

---

## Avant de commencer : une analogie

Vous Ãªtes perdu dans une ville que vous ne connaissez pas. Vous avez besoin d'un plan. Lequel prÃ©fÃ©rez-vous ?

**Option A :** Une carte du monde entier, avec chaque rue de chaque ville, imprimÃ©e sur une feuille A4. Techniquement, l'information y est. Mais vous ne voyez rien â€” tout est minuscule et illisible.

**Option B :** Votre tÃ©lÃ©phone, avec Google Maps. Quand vous Ãªtes dÃ©zoomÃ©, vous voyez les quartiers. Quand vous zoomez, vous voyez les rues. Vous ne voyez jamais tout en mÃªme temps, mais vous voyez toujours **ce dont vous avez besoin au bon moment**.

En ce moment, votre plan c'est l'Option A. Tout est dedans â€” parties, parcours, dÃ©tails â€” et vous collez le tout au dÃ©but de chaque message. Plus le projet grandit, plus le plan grandit, et plus Claude a du mal Ã  s'y retrouver. Exactement comme vous avec la carte du monde imprimÃ©e en A4.

Ce module va vous apprendre Ã  transformer votre plan en Option B : un systÃ¨me Ã  **niveaux de zoom** qui montre Ã  Claude exactement ce dont il a besoin, ni plus, ni moins.

---

## Ã‰tape 1 â€” Provoquer le problÃ¨me (45 min)

### Ce que vous allez faire

Reprenez votre plan complet (parties + parcours). Ouvrez une **nouvelle conversation** avec Claude et collez TOUT â€” le plan entier â€” suivi d'une demande prÃ©cise sur une seule partie :

> Voici le plan complet de mon application :
>
> [collez TOUT : les parties, les parcours, tout]
>
> Je veux que tu amÃ©liores la partie "PrÃªts". Quand un membre demande Ã  emprunter un livre, le propriÃ©taire doit pouvoir accepter ou refuser. Si le propriÃ©taire ne rÃ©pond pas en 3 jours, la demande est automatiquement annulÃ©e. ImplÃ©mente Ã§a.

Ensuite, demandez des amÃ©liorations Ã  d'autres parties, toujours en collant le plan entier Ã  chaque fois :

> [plan entier]
> Maintenant amÃ©liore la partie "RÃ©unions" : ajoute la possibilitÃ© de mettre une rÃ©union en liste d'attente quand elle est pleine.

> [plan entier]
> Maintenant amÃ©liore la partie "Statistiques" : ajoute un classement des membres les plus actifs par chapitre.

> [plan entier]
> Maintenant amÃ©liore la partie "Livres" : quand un livre est proposÃ©, vÃ©rifie automatiquement s'il existe dÃ©jÃ  dans un autre chapitre et propose de le rÃ©cupÃ©rer au lieu de crÃ©er un doublon.

### ğŸ”´ Ce que vous devez surveiller

**ğŸš© Claude rÃ©sume ou ignore des morceaux du plan.**
Le plan est trop long. Claude ne vous le dit pas, mais il commence Ã  "survoler" certaines parties. Vous le voyez quand il fait quelque chose qui contredit un parcours que vous aviez dÃ©fini, ou quand il oublie une rÃ¨gle d'une partie qui n'est pas celle sur laquelle vous travaillez.

**ğŸš© Claude modifie des parties que vous n'avez pas demandÃ© de toucher.**
Vous lui demandez de travailler sur "PrÃªts", mais il change quelque chose dans "Comptes" ou "Notifications" sans prÃ©venir, parce qu'il a lu tout le plan et s'est dit que c'Ã©tait liÃ©.

**ğŸš© Vous passez plus de temps Ã  gÃ©rer le plan qu'Ã  avancer.**
Coller le plan entier prend de la place. Relire les rÃ©ponses de Claude pour vÃ©rifier qu'il n'a rien cassÃ© ailleurs prend du temps. Vous commencez Ã  sentir que le plan, censÃ© vous aider, devient un poids.

**ğŸš© Claude vous donne des rÃ©ponses de plus en plus longues et vagues.**
Quand il reÃ§oit beaucoup d'information, Claude essaie de tout prendre en compte. RÃ©sultat : des rÃ©ponses diluÃ©es qui parlent de tout sans rien faire de prÃ©cis.

### Ce que vous devez noter dans votre carnet

> âœï¸ Est-ce que Claude a respectÃ© le plan ou est-ce qu'il a pris des libertÃ©s ?
> âœï¸ Avez-vous eu l'impression qu'il lisait vraiment tout le plan ou qu'il survolait ?
> âœï¸ Combien de temps passez-vous Ã  coller le plan et vÃ©rifier les rÃ©ponses par rapport au temps que Claude passe Ã  coder ?

---

## Ã‰tape 2 â€” Comprendre le problÃ¨me (20 min)

### Lisez ceci APRÃˆS avoir fait l'Ã©tape 1

Le Module 1 a rÃ©solu le problÃ¨me de l'amnÃ©sie de Claude (en lui donnant un plan). Le Module 2 a rÃ©solu le problÃ¨me de l'ordre des opÃ©rations (en dÃ©crivant des parcours). Maintenant, le problÃ¨me c'est **le bruit**.

Quand vous collez votre plan entier pour travailler sur la partie "PrÃªts", vous donnez Ã  Claude une tonne d'information sur les Comptes, les RÃ©unions, les Statistiques, les Notifications... dont il n'a pas besoin. C'est comme si vous demandiez Ã  un plombier de rÃ©parer un robinet et que vous lui donniez les plans de toute la maison, y compris le circuit Ã©lectrique du grenier et la disposition des meubles du salon.

Le plombier va peut-Ãªtre quand mÃªme trouver le robinet. Mais il va perdre du temps Ã  comprendre ce qui est pertinent. Et il risque de se dire "tiens, tant que j'y suis, je vais dÃ©placer ce tuyau dans la salle de bain" â€” alors que vous ne lui avez rien demandÃ©.

**Ce dont le plombier a besoin, c'est :**
1. Le plan de la cuisine (la piÃ¨ce oÃ¹ il travaille)
2. Un schÃ©ma montrant oÃ¹ arrive l'eau et oÃ¹ elle repart (ses connexions avec le reste de la maison)
3. C'est tout.

Il n'a pas besoin de savoir combien de prises il y a dans le salon. Il a besoin de savoir d'oÃ¹ vient l'eau et oÃ¹ elle va. Le reste ne le concerne pas.

---

## Ã‰tape 3 â€” CrÃ©er les fiches (45 min)

### L'idÃ©e clÃ©

Vous allez transformer votre plan en **deux niveaux** :

**Niveau 1 â€” La vue d'ensemble.** Une version courte du plan qui tient en une vingtaine de lignes. Pour chaque partie, juste le nom, une phrase sur ce qu'elle fait, et surtout : **ce qu'on peut lui demander et ce qu'elle rÃ©pond**. Pas les dÃ©tails internes.

**Niveau 2 â€” Les fiches dÃ©taillÃ©es.** Une fiche par partie, avec tous les dÃ©tails internes, les parcours qui la concernent, ses rÃ¨gles. Vous ne collez qu'une fiche Ã  la fois â€” celle de la partie sur laquelle vous travaillez.

### Ce que vous allez faire

Ouvrez une **nouvelle conversation** avec Claude :

> Voici le plan complet de mon application :
> [collez le plan entier une derniÃ¨re fois]
>
> J'ai besoin de transformer ce plan en deux niveaux.
>
> NIVEAU 1 â€” La vue d'ensemble : un rÃ©sumÃ© court de toute l'application. Pour chaque partie, Ã©cris seulement :
> - Son nom
> - Ce qu'elle fait (une phrase)
> - Sa "porte d'entrÃ©e" : la liste des demandes qu'on peut lui faire, et ce qu'elle rÃ©pond. Comme un guichet : "vous pouvez me demander X, je vous rÃ©pondrai Y."
>
> NIVEAU 2 â€” Une fiche par partie. Chaque fiche contient :
> - Tout le dÃ©tail interne de la partie
> - Les parcours dans lesquels elle intervient
> - Ses rÃ¨gles spÃ©cifiques
>
> Ã‰cris tout Ã§a en franÃ§ais simple.

### Ce que Claude va vous donner

**Le niveau 1** ressemblera Ã  Ã§a :

```
VUE D'ENSEMBLE â€” Club de lecture

PARTIE : Comptes
Fait : gÃ¨re qui est qui (inscription, connexion)
Porte d'entrÃ©e :
  - "Ce membre existe ?" â†’ oui/non
  - "CrÃ©er un compte" â†’ compte crÃ©Ã© ou erreur
  - "Qui est ce membre ?" â†’ nom, email, date d'inscription

PARTIE : Droits d'accÃ¨s
Fait : gÃ¨re qui a le droit de faire quoi
Porte d'entrÃ©e :
  - "Ce membre peut-il faire cette action ?" â†’ oui/non
  - "Donner le rÃ´le admin Ã  ce membre" â†’ fait ou erreur

PARTIE : Livres
Fait : gÃ¨re le catalogue de livres, les propositions, les votes
Porte d'entrÃ©e :
  - "Ajouter un livre" â†’ livre ajoutÃ© ou erreur (doublon)
  - "Voter pour ce livre" â†’ vote enregistrÃ©
  - "Quels livres dans cette catÃ©gorie ?" â†’ liste de livres

PARTIE : PrÃªts
Fait : gÃ¨re les emprunts de livres entre membres
Porte d'entrÃ©e :
  - "Demander Ã  emprunter ce livre" â†’ demande envoyÃ©e au propriÃ©taire
  - "Accepter/refuser une demande" â†’ prÃªt confirmÃ© ou refusÃ©
  - "Signaler un retour" â†’ prÃªt terminÃ©

...etc.
```

**Chaque fiche de niveau 2** ressemblera Ã  Ã§a :

```
FICHE DÃ‰TAILLÃ‰E : PrÃªts

Ce que cette partie fait :
  GÃ¨re les emprunts de livres entre membres du club.

Ce qu'elle ne fait PAS :
  - Ne gÃ¨re pas le catalogue de livres (c'est Livres)
  - Ne gÃ¨re pas les notifications (c'est Notifications)
  - Ne vÃ©rifie pas les droits d'accÃ¨s elle-mÃªme (c'est Droits d'accÃ¨s)

Porte d'entrÃ©e :
  - "Demander Ã  emprunter" â†’ vÃ©rifie que le livre est disponible,
    crÃ©e une demande en attente, demande Ã  Notifications de prÃ©venir
    le propriÃ©taire. RÃ©pond : demande crÃ©Ã©e (avec un numÃ©ro).
  - "Accepter une demande" â†’ marque le livre comme empruntÃ©,
    demande Ã  Notifications de prÃ©venir l'emprunteur.
    RÃ©pond : prÃªt confirmÃ©.
  - "Refuser une demande" â†’ annule la demande, demande Ã  Notifications
    de prÃ©venir l'emprunteur. RÃ©pond : demande refusÃ©e.
  - "Signaler un retour" â†’ marque le livre comme disponible,
    demande Ã  Notifications de prÃ©venir le propriÃ©taire.
    RÃ©pond : retour enregistrÃ©.

RÃ¨gles internes :
  - Une demande non rÃ©pondue expire aprÃ¨s 3 jours
  - Un membre ne peut pas emprunter plus de 3 livres en mÃªme temps
  - Un membre banni : tous ses prÃªts en cours dÃ©clenchent un retour forcÃ©

Parcours liÃ©s :
  - "Emprunt de livre" (voir parcours complet)
  - "Bannissement d'un membre" (Ã©tape : retour forcÃ© des prÃªts)
```

### Pourquoi les "portes d'entrÃ©e" changent tout

Regardez bien la vue d'ensemble. Chaque partie a une liste de choses qu'on peut lui demander et ce qu'elle rÃ©pond. C'est exactement comme un guichet administratif :

- Vous allez au guichet "Ã‰tat civil" pour un acte de naissance. Vous ne lui demandez pas un permis de conduire.
- Vous n'avez pas besoin de savoir comment le guichet fonctionne en interne. Vous avez juste besoin de savoir **ce que vous pouvez lui demander et ce qu'il vous rend**.

C'est Ã§a, une "porte d'entrÃ©e" : la liste de ce qu'on peut demander Ã  une partie, vue de l'extÃ©rieur. L'intÃ©rieur de la partie (comment elle stocke les donnÃ©es, comment elle calcule les choses, dans quel ordre elle fait ses opÃ©rations) n'intÃ©resse que celui qui travaille dessus.

**C'est la sÃ©paration la plus importante de ce cours : l'extÃ©rieur (ce qu'on peut demander) vs l'intÃ©rieur (comment Ã§a marche).**

---

## Ã‰tape 4 â€” Travailler avec les niveaux de zoom (45 min)

### Ce que vous allez faire

Maintenant, quand vous voulez travailler sur une partie, vous collez **deux choses** :
1. La vue d'ensemble (niveau 1) â€” pour que Claude sache ce qui existe
2. La fiche dÃ©taillÃ©e de la partie concernÃ©e (niveau 2) â€” pour qu'il ait les dÃ©tails

Essayez :

> Voici la vue d'ensemble de mon application :
> [collez le niveau 1]
>
> Et voici la fiche dÃ©taillÃ©e de la partie sur laquelle je travaille :
> [collez la fiche "PrÃªts"]
>
> Je veux amÃ©liorer les PrÃªts : quand un livre est en retard depuis plus de 2 semaines, le propriÃ©taire doit pouvoir envoyer un rappel. AprÃ¨s 4 semaines, le prÃªt est signalÃ© Ã  l'admin.

### ğŸŸ¢ Ce que vous allez remarquer

**Claude est plus prÃ©cis.** Il ne se perd plus dans des dÃ©tails sur les RÃ©unions ou les Statistiques. Il se concentre sur les PrÃªts.

**Claude respecte les frontiÃ¨res.** Quand il a besoin de Notifications pour envoyer le rappel, il ne rÃ©Ã©crit pas le systÃ¨me de notifications. Il Ã©crit quelque chose comme "demander Ã  Notifications d'envoyer un rappel au propriÃ©taire". Il utilise la porte d'entrÃ©e.

**Claude ne touche pas aux autres parties.** Parce qu'il ne connaÃ®t que leur porte d'entrÃ©e, pas leur fonctionnement interne. Il ne peut pas les modifier mÃªme s'il le voulait.

**Vos messages sont plus courts.** La vue d'ensemble + une fiche, c'est beaucoup moins long que le plan entier. Claude a moins Ã  lire, vous avez moins Ã  coller, et les rÃ©ponses sont plus ciblÃ©es.

### Ce que vous devez noter dans votre carnet

> âœï¸ Est-ce que les rÃ©ponses de Claude sont plus courtes et plus prÃ©cises qu'Ã  l'Ã©tape 1 ?
> âœï¸ Est-ce que Claude a essayÃ© de modifier une partie autre que celle sur laquelle vous travailliez ?
> âœï¸ Quand Claude a eu besoin d'une autre partie, est-ce qu'il a utilisÃ© la porte d'entrÃ©e ou est-ce qu'il a inventÃ© sa propre solution ?

---

## Ã‰tape 5 â€” Le test des deux conversations (30 min)

### Ce que vous allez faire

Avant de commencer, sauvegardez votre Ã©tat actuel â€” vous allez faire travailler deux conversations en parallÃ¨le sur les mÃªmes fichiers, et il vaut mieux avoir un point de retour :

```bash
git add .
git commit -m "Module 3 : avant travail parallÃ¨le"
```

Si une des deux conversations fait n'importe quoi, `git checkout .` vous ramÃ¨nera ici.

Ouvrez **deux conversations** avec Claude en mÃªme temps. Dans chacune, collez la mÃªme vue d'ensemble, mais une fiche diffÃ©rente.

**Conversation A :**
> [vue d'ensemble]
> [fiche dÃ©taillÃ©e : PrÃªts]
> AmÃ©liore les PrÃªts pour gÃ©rer les livres abÃ®mÃ©s : quand un livre est rendu abÃ®mÃ©, le propriÃ©taire peut signaler le dÃ©gÃ¢t et demander un remplacement.

**Conversation B :**
> [vue d'ensemble]
> [fiche dÃ©taillÃ©e : RÃ©unions]
> AmÃ©liore les RÃ©unions pour ajouter un systÃ¨me de covoiturage : les membres peuvent proposer ou chercher un trajet pour se rendre Ã  la rÃ©union.

### Ce que vous allez observer

Les deux conversations avancent **sans se gÃªner**. La conversation A ne touche qu'aux PrÃªts. La conversation B ne touche qu'aux RÃ©unions. Et quand l'une a besoin de l'autre (par exemple, RÃ©unions a besoin de Notifications pour prÃ©venir les covoitureurs), elle utilise la porte d'entrÃ©e â€” pas le dÃ©tail interne.

C'est comme si vous aviez deux artisans qui travaillent chacun dans une piÃ¨ce diffÃ©rente de l'appartement. Ils ne se marchent pas dessus parce que chacun ne voit que sa piÃ¨ce et les portes qui mÃ¨nent aux autres.

### Le dÃ©clic

Vous venez de faire quelque chose de puissant : vous avez **parallÃ©lisÃ© le travail**. Deux conversations, deux parties, en mÃªme temps, sans conflit. C'est possible uniquement parce que vous avez sÃ©parÃ© ce que chaque partie montre aux autres (la porte d'entrÃ©e) de ce qu'elle fait en interne (la fiche dÃ©taillÃ©e).

Si tout Ã©tait dans un seul gros plan, Ã§a serait impossible. Les deux conversations modifieraient le mÃªme document et crÃ©eraient des contradictions.

---

## Ã‰tape 6 â€” Mettre Ã  jour la vue d'ensemble (15 min)

### Ce que vous allez faire

AprÃ¨s avoir amÃ©liorÃ© les PrÃªts et les RÃ©unions, vos fiches dÃ©taillÃ©es ont changÃ©. Est-ce que la vue d'ensemble doit changer aussi ?

VÃ©rifiez :

- Est-ce que les PrÃªts ont une nouvelle porte d'entrÃ©e ? (Oui : "Signaler un livre abÃ®mÃ©" â†’ demande de remplacement crÃ©Ã©e). Il faut l'ajouter Ã  la vue d'ensemble.
- Est-ce que les RÃ©unions ont une nouvelle porte d'entrÃ©e ? (Oui : "Proposer un covoiturage", "Chercher un covoiturage"). Il faut l'ajouter.
- Est-ce que le fonctionnement interne des PrÃªts a changÃ© ? (Oui : nouvelle rÃ¨gle sur les livres abÃ®mÃ©s). Ã‡a va dans la fiche, PAS dans la vue d'ensemble.

### La rÃ¨gle d'or

**La vue d'ensemble ne change que quand une porte d'entrÃ©e change.** Si vous modifiez comment une partie fonctionne en interne sans changer ce qu'on peut lui demander, la vue d'ensemble reste identique.

C'est exactement comme un distributeur automatique. Si le mÃ©canicien change les rouages Ã  l'intÃ©rieur, vous ne le voyez pas â€” vous appuyez sur les mÃªmes boutons et vous recevez les mÃªmes produits. Mais si le distributeur ajoute une nouvelle boisson, il y a un nouveau bouton. C'est CE changement qui apparaÃ®t dans la vue d'ensemble.

---

## Ce que vous avez appris

### En une phrase

**Quand un projet grandit, il faut montrer Ã  l'IA la bonne quantitÃ© d'information : assez pour qu'elle comprenne le contexte, pas trop pour qu'elle se noie.**

### Les trois nouveaux rÃ©flexes

7. **SÃ©parez la vue d'ensemble des fiches dÃ©taillÃ©es.** La vue d'ensemble montre toutes les parties et leurs portes d'entrÃ©e. Les fiches contiennent le dÃ©tail interne d'une seule partie.

8. **Travaillez une partie Ã  la fois.** Collez la vue d'ensemble + la fiche de la partie concernÃ©e. Pas le plan entier.

9. **Distinguez l'extÃ©rieur de l'intÃ©rieur.** Ce qu'on peut demander Ã  une partie (sa porte d'entrÃ©e) et comment elle fonctionne en interne sont deux choses diffÃ©rentes. L'un est public, l'autre est privÃ©.

### La structure de votre plan

```
VUE D'ENSEMBLE (toujours collÃ©e)
â”œâ”€â”€ Comptes â€” porte d'entrÃ©e : ...
â”œâ”€â”€ Droits d'accÃ¨s â€” porte d'entrÃ©e : ...
â”œâ”€â”€ Livres â€” porte d'entrÃ©e : ...
â”œâ”€â”€ PrÃªts â€” porte d'entrÃ©e : ...
â”œâ”€â”€ ...
â”‚
FICHES DÃ‰TAILLÃ‰ES (une seule collÃ©e Ã  la fois)
â”œâ”€â”€ Fiche : Comptes (dÃ©tails internes + parcours)
â”œâ”€â”€ Fiche : PrÃªts (dÃ©tails internes + parcours)
â”œâ”€â”€ ...
```

### Ce qu'on n'a toujours pas fait

On n'a toujours pas :
- Appris un langage de programmation
- Compris le code que Claude Ã©crit
- InstallÃ© d'outils complexes

Mais remarquez ce qu'on SAIT faire maintenant. On sait :
- DÃ©couper un projet en parties avec des responsabilitÃ©s claires (Module 1)
- DÃ©crire comment elles travaillent ensemble et gÃ¨rent les erreurs (Module 2)
- ContrÃ´ler l'information qu'on donne Ã  l'IA pour rester efficace (Module 3)

Ce sont les mÃªmes compÃ©tences qu'un architecte logiciel professionnel. Juste sans le jargon.

---

## Avant de partir â€” sauvegardez

```bash
git add .
git commit -m "Module 3 terminÃ© : vue d'ensemble et fiches dÃ©taillÃ©es"
```

---

## La suite

Dans le Module 4, on va affronter la question la plus difficile : **comment savoir si ce que Claude a construit marche vraiment ?** Vous lui faites confiance depuis le dÃ©but â€” mais comment vÃ©rifier qu'un paiement qui "marche" marche vraiment ? Qu'une annulation annule vraiment tout ? On va apprendre Ã  Ã©crire des **scÃ©narios de vÃ©rification** â€” sans savoir lire le code.
